<!DOCTYPE html>
<html lang="zh-Hant" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle} ?: '電商後台系統'">電商後台系統</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <!-- Alpine.js for simple interactivity -->
     <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <style>
        /* Simple custom styles for the layout */
        [x-cloak] { display: none !important; }
        body { font-family: 'Inter', 'Noto Sans TC', sans-serif; }
    </style>
    <!-- 您可以將這段 style 放在 <head> 標籤中，或是一個外部 CSS 檔案 -->
<style>
    /* 用於已下架商品整行的樣式 */
    .inactive-row {
        background-color: #f8f9fa; /* 更淡的灰色 */
        color: #6c757d; /* 文字也變灰 */
    }

    /* 狀態標籤的基礎樣式 */
    .status-badge {
        display: inline-block;
        padding: 0.25em 0.6em;
        font-size: 75%;
        font-weight: 700;
        line-height: 1;
        text-align: center;
        white-space: nowrap;
        vertical-align: baseline;
        border-radius: 0.375rem; /* rounded-md */
        color: white;
    }

    /* 上架中 (綠色) */
    .status-badge-active {
        background-color: #10B981; /* Tailwind's green-500 */
    }

    /* 已下架 (灰色) */
    .status-badge-inactive {
        background-color: #6B7280; /* Tailwind's gray-500 */
    }
</style>

</head>
<body class="bg-gray-100">

    <div class="flex h-screen bg-gray-100" x-data="{ sidebarOpen: false }" x-cloak>
        <!-- 1. Sidebar (側邊欄導航) -->
        <aside
            th:fragment="sidebar"
            class="fixed inset-y-0 left-0 z-30 w-64 bg-gray-800 text-white transform transition-transform duration-300 ease-in-out md:relative md:translate-x-0"
            :class="{'translate-x-0': sidebarOpen, '-translate-x-full': !sidebarOpen}">
            
            <!-- Logo -->
            <div class="flex items-center justify-center px-4 h-16 bg-gray-900">
                <span class="text-xl font-bold"><i class="fas fa-store mr-2"></i>電商後台系統</span>
            </div>

            <!-- Navigation Links -->
            <nav class="mt-4">
                <a th:href="@{/dashboard}" th:classappend="${activePage == 'dashboard'} ? 'bg-gray-700'" class="flex items-center px-4 py-3 hover:bg-gray-700 transition-colors duration-200">
                    <i class="fas fa-tachometer-alt w-6"></i>
                    <span class="ml-3">儀表板</span>
                </a>
                <a th:href="@{/products}" th:classappend="${activePage == 'products'} ? 'bg-gray-700'" class="flex items-center px-4 py-3 mt-2 hover:bg-gray-700 transition-colors duration-200">
                    <i class="fas fa-box-open w-6"></i>
                    <span class="ml-3">商品管理</span>
                </a>
                <a th:href="@{/orders}" th:classappend="${activePage == 'orders'} ? 'bg-gray-700'" class="flex items-center px-4 py-3 mt-2 hover:bg-gray-700 transition-colors duration-200">
                    <i class="fas fa-receipt w-6"></i>
                    <span class="ml-3">訂單管理</span>
                </a>
                <a th:href="@{/customers}" th:classappend="${activePage == 'customers'} ? 'bg-gray-700'" class="flex items-center px-4 py-3 mt-2 hover:bg-gray-700 transition-colors duration-200">
                    <i class="fas fa-users w-6"></i>
                    <span class="ml-3">顧客管理</span>
                </a>
                <a th:href="@{/analytics/report}" th:classappend="${activePage == 'analytics'} ? 'bg-gray-700'" class="flex items-center px-4 py-3 mt-2 hover:bg-gray-700 transition-colors duration-200">
                    <i class="fas fa-chart-line w-6"></i>
                    <span class="ml-3">收益分析</span>
                </a>
            </nav>
        </aside>

        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- 2. Header (頂部導航) -->
            <header th:fragment="header" class="flex items-center justify-between px-6 py-3 bg-white border-b">
                <!-- Mobile Menu Button -->
                <button @click="sidebarOpen = !sidebarOpen" class="md:hidden text-gray-500 focus:outline-none">
                    <i class="fas fa-bars text-xl"></i>
                </button>

                <!-- Placeholder for search or other header items -->
                <div class="hidden md:block">
                    <!-- Can add a search bar here later -->
                </div>

                <!-- Profile Dropdown -->
                <div x-data="{ dropdownOpen: false }" class="relative">
                    <button @click="dropdownOpen = !dropdownOpen" class="relative block h-8 w-8 rounded-full overflow-hidden border-2 border-gray-600 focus:outline-none">
                        <i class="fas fa-user text-gray-600 text-lg leading-loose"></i>
                    </button>
                    <div x-show="dropdownOpen" @click.away="dropdownOpen = false" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20">
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">個人資料</a>
                        <form th:action="@{/logout}" method="post">
                            <button type="submit" class="w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">登出</button>
                        </form>
                    </div>
                </div>
            </header>

            <!-- 3. Main Content (主要內容區域) -->
            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6">
                <div th:replace="~{${view} :: content}"></div> 
                    
                    
                
                      
          </main>    
            <!-- 4. Footer (頁尾) -->
            <footer th:fragment="footer" class="text-center p-4 text-xs text-gray-500 bg-white border-t">
                &copy; <span th:text="${#dates.year(#dates.createNow())}">2025</span> Vendor E-commerce Platform. All Rights Reserved.
            </footer> 
       
        </div>
    </div>
  



</body>
</html>