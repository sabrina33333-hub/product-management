<!DOCTYPE html>
<html lang="zh-Hant" xmlns:th="http://www.thymeleaf.org">
<body>
  <!-- 所有內容都必須在這個 div 內部 -->
  <div th:fragment="content">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold">商品管理</h1>
      <!-- 連結已修正為 /products/form -->
      <a th:href="@{/products/form}"
         class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition duration-300">
        <i class="fas fa-plus mr-2"></i>新增商品
      </a>
    </div>
    <div class="bg-white p-6 rounded-lg shadow-md">
      <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">商品名稱</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">價格</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">進貨成本</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">庫存</th>
                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                </tr>
        <!-- ... 表格內容 ... -->
        <tbody>
          <tr th:each="product : ${products}" class="border-t hover:bg-gray-50">
            <td class="py-3 px-4" th:text="${product.name}">範例商品</td>
            <td class="py-3 px-4" th:text="${#numbers.formatCurrency(product.price)}">$100.00</td>
            <td class="py-4 px-6"  th:text="${#numbers.formatCurrency(product.cost)}">$0.00</td>
            <td class="py-3 px-4" th:text="${product.stockQuantity}">50</td>
            <td class="py-3 px-4 text-center">
              <!-- 編輯連結已修正 -->
              <a th:href="@{/products/form(id=${product.id})}"
                 class="text-blue-500 hover:text-blue-700 mr-4">
                <i class="fas fa-edit"></i> 編輯
              </a>
              <!-- 刪除表單路徑正確 -->
              <form th:action="@{/products/delete/{id}(id=${product.id})}" method="post" class="inline"
                    onsubmit="return confirm('您確定要刪除此商品嗎？');">
                <button type="submit" class="text-red-500 hover:text-red-700">
                  <i class="fas fa-trash"></i> 刪除
                </button>
              </form>
            </td>
          </tr>
          <!-- ... -->
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>